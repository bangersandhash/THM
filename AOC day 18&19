Killing processes and analysing the output


root@tryhackme:/home/ubuntu# systemctl list-unit-files | grep enabled
proc-sys-fs-binfmt_misc.automount              static          enabled      
-.mount                                        generated       enabled      
dev-hugepages.mount                            static          enabled      
dev-mqueue.mount                               static          enabled      
proc-sys-fs-binfmt_misc.mount                  disabled        enabled      
snap-amazon\x2dssm\x2dagent-5163.mount         enabled         enabled      
snap-amazon\x2dssm\x2dagent-7628.mount         enabled         enabled      
snap-core-16202.mount                          enabled         enabled      
snap-core18-2790.mount                         enabled         enabled      
snap-core18-2796.mount                         enabled         enabled      
snap-core20-1361.mount                         enabled         enabled      
snap-core20-2015.mount                         enabled         enabled      
snap-lxd-22526.mount                           enabled         enabled      
snap-lxd-24061.mount                           enabled         enabled      
sys-fs-fuse-connections.mount                  static          enabled      
sys-kernel-config.mount                        static          enabled      
sys-kernel-debug.mount                         static          enabled      
sys-kernel-tracing.mount                       static          enabled      
acpid.path                                     enabled         enabled      
apport-autoreport.path                         enabled         enabled      
cups.path                                      enabled         enabled      
systemd-ask-password-console.path              static          enabled      
systemd-ask-password-plymouth.path             static          enabled      
systemd-ask-password-wall.path                 static          enabled      
session-1.scope                                transient       enabled      
session-c1.scope                               transient       enabled      
a-unkillable.service                           enabled         enabled      
accounts-daemon.service                        enabled         enabled      
acpid.service                                  disabled        enabled      
alsa-restore.service                           static          enabled      
alsa-state.service                             static          enabled      
alsa-utils.service                             masked          enabled      
anacron.service                                enabled         enabled      
apparmor.service                               enabled         enabled      
apport-autoreport.service                      static          enabled      
apport-forward@.service                        static          enabled      
apport.service                                 generated       enabled      
apt-daily-upgrade.service                      static          enabled      
apt-daily.service                              static          enabled      
atd.service                                    enabled         enabled      
autovt@.service                                enabled         enabled      
avahi-daemon.service                           enabled         enabled      
blk-availability.service                       enabled         enabled      
blueman-mechanism.service                      enabled         enabled      
bluetooth.service                              enabled         enabled      
bolt.service                                   static          enabled      
brltty-udev.service                            static          enabled      
brltty.service                                 disabled        enabled      
clean-mount-point@.service                     static          enabled      
cloud-config.service                           enabled         enabled      
cloud-final.service                            enabled         enabled      
cloud-init-local.service                       enabled         enabled      
cloud-init.service                             enabled         enabled      
colord.service                                 static          enabled      
configure-printer@.service                     static          enabled      
console-setup.service                          enabled         enabled      
container-getty@.service                       static          enabled      
cron.service                                   enabled         enabled      
cryptdisks-early.service                       masked          enabled      
cryptdisks.service                             masked          enabled      
cups-browsed.service                           enabled         enabled      
cups.service                                   enabled         enabled      
dbus-fi.w1.wpa_supplicant1.service             enabled         enabled      
dbus-org.bluez.service                         enabled         enabled      
dbus-org.freedesktop.Avahi.service             enabled         enabled      
dbus-org.freedesktop.hostname1.service         static          enabled      
dbus-org.freedesktop.locale1.service           static          enabled      
dbus-org.freedesktop.login1.service            static          enabled      
dbus-org.freedesktop.ModemManager1.service     enabled         enabled      
dbus-org.freedesktop.nm-dispatcher.service     enabled         enabled      
dbus-org.freedesktop.resolve1.service          enabled         enabled      
dbus-org.freedesktop.timedate1.service         static          enabled      
dbus-org.freedesktop.timesync1.service         enabled         enabled      
dbus.service                                   static          enabled      
display-manager.service                        indirect        enabled      
dm-event.service                               static          enabled      
dmesg.service                                  enabled         enabled      
e2scrub@.service                               static          enabled      
e2scrub_all.service                            static          enabled      
e2scrub_fail@.service                          static          enabled      
e2scrub_reap.service                           enabled         enabled      
ec2-instance-connect.service                   enabled         enabled      
emergency.service                              static          enabled      
finalrd.service                                enabled         enabled      
fprintd.service                                static          enabled      
friendly-recovery.service                      static          enabled      
fstrim.service                                 static          enabled      
fwupd-offline-update.service                   static          enabled      
fwupd.service                                  static          enabled      
gdm.service                                    static          enabled      
gdm3.service                                   static          enabled      
geoclue.service                                static          enabled      
getty-static.service                           static          enabled      
getty@.service                                 enabled         enabled      
gpu-manager.service                            enabled         enabled      
grub-common.service                            generated       enabled      
grub-initrd-fallback.service                   enabled         enabled      
hddtemp.service                                generated       enabled      
hibagent.service                               generated       enabled      
hibinit-agent.service                          enabled         enabled      
hwclock.service                                masked          enabled      
ifup@.service                                  static          enabled      
ifupdown-pre.service                           static          enabled      
ifupdown-wait-online.service                   disabled        enabled      
iio-sensor-proxy.service                       static          enabled      
initrd-cleanup.service                         static          enabled      
initrd-parse-etc.service                       static          enabled      
initrd-switch-root.service                     static          enabled      
initrd-udevadm-cleanup-db.service              static          enabled      
ippusbxd@.service                              static          enabled      
irqbalance.service                             enabled         enabled      
iscsi.service                                  enabled         enabled      
iscsid.service                                 disabled        enabled      
kerneloops.service                             enabled         enabled      
keyboard-setup.service                         enabled         enabled      
kmod-static-nodes.service                      static          enabled      
kmod.service                                   static          enabled      
lightdm.service                                indirect        enabled      
logrotate.service                              static          enabled      
lvm2-lvmpolld.service                          static          enabled      
lvm2-monitor.service                           enabled         enabled      
lvm2-pvscan@.service                           static          enabled      
lvm2.service                                   masked          enabled      
lxd-agent-9p.service                           enabled         enabled      
lxd-agent.service                              enabled         enabled      
man-db.service                                 static          enabled      
mdadm-grow-continue@.service                   static          enabled      
mdadm-last-resort@.service                     static          enabled      
mdcheck_continue.service                       static          enabled      
mdcheck_start.service                          static          enabled      
mdmon@.service                                 static          enabled      
mdmonitor-oneshot.service                      static          enabled      
mdmonitor.service                              static          enabled      
ModemManager.service                           enabled         enabled      
modprobe@.service                              static          enabled      
motd-news.service                              static          enabled      
multipath-tools-boot.service                   masked          enabled      
multipath-tools.service                        enabled         enabled      
multipathd.service                             enabled         enabled      
netplan-ovs-cleanup.service                    enabled-runtime enabled      
network-manager.service                        enabled         enabled      
networkd-dispatcher.service                    enabled         enabled      
networking.service                             enabled         enabled      
NetworkManager-dispatcher.service              enabled         enabled      
NetworkManager-wait-online.service             enabled         enabled      
NetworkManager.service                         enabled         enabled      
ondemand.service                               enabled         enabled      
open-iscsi.service                             enabled         enabled      
open-vm-tools.service                          enabled         enabled      
openvpn-client@.service                        disabled        enabled      
openvpn-server@.service                        disabled        enabled      
openvpn.service                                enabled         enabled      
openvpn@.service                               disabled        enabled      
packagekit-offline-update.service              static          enabled      
packagekit.service                             static          enabled      
plymouth-halt.service                          static          enabled      
plymouth-kexec.service                         static          enabled      
plymouth-log.service                           static          enabled      
plymouth-poweroff.service                      static          enabled      
plymouth-quit-wait.service                     static          enabled      
plymouth-quit.service                          static          enabled      
plymouth-read-write.service                    static          enabled      
plymouth-reboot.service                        static          enabled      
plymouth-start.service                         static          enabled      
plymouth-switch-root.service                   static          enabled      
plymouth.service                               static          enabled      
polkit.service                                 static          enabled      
pollinate.service                              enabled         enabled      
pppd-dns.service                               enabled         enabled      
procps.service                                 static          enabled      
pulseaudio-enable-autospawn.service            masked          enabled      
quotaon.service                                static          enabled      
rc-local.service                               static          enabled      
rc.service                                     masked          enabled      
rcS.service                                    masked          enabled      
rescue.service                                 static          enabled      
rsync.service                                  enabled         enabled      
rsyslog.service                                enabled         enabled      
rtkit-daemon.service                           disabled        enabled      
saned.service                                  masked          enabled      
saned@.service                                 indirect        enabled      
screen-cleanup.service                         masked          enabled      
secureboot-db.service                          enabled         enabled      
serial-getty@.service                          indirect        enabled      
setvtrgb.service                               enabled         enabled      
snap.amazon-ssm-agent.amazon-ssm-agent.service enabled         enabled      
snap.lxd.activate.service                      enabled         enabled      
snap.lxd.daemon.service                        static          enabled      
snapd.apparmor.service                         enabled         enabled      
snapd.autoimport.service                       enabled         enabled      
snapd.core-fixup.service                       enabled         enabled      
snapd.failure.service                          static          enabled      
snapd.recovery-chooser-trigger.service         enabled         enabled      
snapd.seeded.service                           enabled         enabled      
snapd.service                                  enabled         enabled      
snapd.snap-repair.service                      static          enabled      
snapd.system-shutdown.service                  enabled         enabled      
speech-dispatcher.service                      disabled        enabled      
speech-dispatcherd.service                     disabled        enabled      
spice-vdagent.service                          indirect        enabled      
spice-vdagentd.service                         indirect        enabled      
ssh.service                                    enabled         enabled      
ssh@.service                                   static          enabled      
sshd.service                                   enabled         enabled      
sudo.service                                   masked          enabled      
switcheroo-control.service                     enabled         enabled      
syslog.service                                 enabled         enabled      
system-update-cleanup.service                  static          enabled      
systemd-ask-password-console.service           static          enabled      
systemd-ask-password-plymouth.service          static          enabled      
systemd-ask-password-wall.service              static          enabled      
systemd-backlight@.service                     static          enabled      
systemd-binfmt.service                         static          enabled      
systemd-bless-boot.service                     static          enabled      
systemd-boot-check-no-failures.service         disabled        enabled      
systemd-boot-system-token.service              static          enabled      
systemd-exit.service                           static          enabled      
systemd-fsck-root.service                      static          enabled      
systemd-fsck@.service                          static          enabled      
systemd-fsckd.service                          static          enabled      
systemd-halt.service                           static          enabled      
systemd-hibernate-resume@.service              static          enabled      
systemd-hibernate.service                      static          enabled      
systemd-hostnamed.service                      static          enabled      
systemd-hwdb-update.service                    static          enabled      
systemd-hybrid-sleep.service                   static          enabled      
systemd-initctl.service                        static          enabled      
systemd-journal-flush.service                  static          enabled      
systemd-journald.service                       static          enabled      
systemd-journald@.service                      static          enabled      
systemd-kexec.service                          static          enabled      
systemd-localed.service                        static          enabled      
systemd-logind.service                         static          enabled      
systemd-machine-id-commit.service              static          enabled      
systemd-modules-load.service                   static          enabled      
systemd-network-generator.service              disabled        enabled      
systemd-networkd-wait-online.service           enabled         enabled      
systemd-networkd.service                       enabled         enabled      
systemd-poweroff.service                       static          enabled      
systemd-pstore.service                         enabled         enabled      
systemd-quotacheck.service                     static          enabled      
systemd-random-seed.service                    static          enabled      
systemd-reboot.service                         static          enabled      
systemd-remount-fs.service                     enabled-runtime enabled      
systemd-resolved.service                       enabled         enabled      
systemd-rfkill.service                         static          enabled      
systemd-suspend-then-hibernate.service         static          enabled      
systemd-suspend.service                        static          enabled      
systemd-sysctl.service                         static          enabled      
systemd-sysusers.service                       static          enabled      
systemd-time-wait-sync.service                 disabled        enabled      
systemd-timedated.service                      static          enabled      
systemd-timesyncd.service                      enabled         enabled      
systemd-tmpfiles-clean.service                 static          enabled      
systemd-tmpfiles-setup-dev.service             static          enabled      
systemd-tmpfiles-setup.service                 static          enabled      
systemd-udev-settle.service                    static          enabled      
systemd-udev-trigger.service                   static          enabled      
systemd-udevd.service                          static          enabled      
systemd-update-utmp-runlevel.service           static          enabled      
systemd-update-utmp.service                    static          enabled      
systemd-user-sessions.service                  static          enabled      
systemd-volatile-root.service                  static          enabled      
udev.service                                   static          enabled      
udisks2.service                                enabled         enabled      
ufw.service                                    enabled         enabled      
unattended-upgrades.service                    enabled         enabled      
upower.service                                 disabled        enabled      
usb_modeswitch@.service                        static          enabled      
usbmuxd.service                                static          enabled      
user-runtime-dir@.service                      static          enabled      
user@.service                                  static          enabled      
uuidd.service                                  indirect        enabled      
vgauth.service                                 enabled         enabled      
vmtoolsd.service                               enabled         enabled      
wacom-inputattach@.service                     static          enabled      
whoopsie.service                               enabled         enabled      
wpa_supplicant-nl80211@.service                disabled        enabled      
wpa_supplicant-wired@.service                  disabled        enabled      
wpa_supplicant.service                         enabled         enabled      
wpa_supplicant@.service                        disabled        enabled      
x11-common.service                             masked          enabled      
xfs_scrub@.service                             static          enabled      
xfs_scrub_all.service                          static          enabled      
xfs_scrub_fail@.service                        static          enabled      
machine.slice                                  static          enabled      
system-systemd\x2dcryptsetup.slice             static          enabled      
user.slice                                     static          enabled      
acpid.socket                                   enabled         enabled      
apport-forward.socket                          enabled         enabled      
avahi-daemon.socket                            enabled         enabled      
cups.socket                                    enabled         enabled      
dbus.socket                                    static          enabled      
dm-event.socket                                enabled         enabled      
iscsid.socket                                  enabled         enabled      
lvm2-lvmpolld.socket                           enabled         enabled      
multipathd.socket                              enabled         enabled      
saned.socket                                   disabled        enabled      
snap.lxd.daemon.unix.socket                    enabled         enabled      
snapd.socket                                   enabled         enabled      
spice-vdagentd.socket                          static          enabled      
ssh.socket                                     disabled        enabled      
systemd-fsckd.socket                           static          enabled      
systemd-initctl.socket                         static          enabled      
systemd-journald-audit.socket                  static          enabled      
systemd-journald-dev-log.socket                static          enabled      
systemd-journald-varlink@.socket               static          enabled      
systemd-journald.socket                        static          enabled      
systemd-journald@.socket                       static          enabled      
systemd-networkd.socket                        enabled         enabled      
systemd-rfkill.socket                          static          enabled      
systemd-udevd-control.socket                   static          enabled      
systemd-udevd-kernel.socket                    static          enabled      
uuidd.socket                                   enabled         enabled      
basic.target                                   static          enabled      
blockdev@.target                               static          enabled      
bluetooth.target                               static          enabled      
boot-complete.target                           static          enabled      
cloud-config.target                            static          enabled      
cloud-init.target                              enabled-runtime enabled      
cryptsetup.target                              static          enabled      
ctrl-alt-del.target                            disabled        enabled      
default.target                                 static          enabled      
emergency.target                               static          enabled      
final.target                                   static          enabled      
friendly-recovery.target                       static          enabled      
getty.target                                   static          enabled      
graphical.target                               static          enabled      
hibernate.target                               static          enabled      
hybrid-sleep.target                            static          enabled      
initrd-fs.target                               static          enabled      
initrd-root-device.target                      static          enabled      
initrd-root-fs.target                          static          enabled      
initrd-switch-root.target                      static          enabled      
initrd.target                                  static          enabled      
local-fs.target                                static          enabled      
multi-user.target                              static          enabled      
network-online.target                          static          enabled      
paths.target                                   static          enabled      
printer.target                                 static          enabled      
reboot.target                                  disabled        enabled      
remote-cryptsetup.target                       disabled        enabled      
remote-fs.target                               enabled         enabled      
rescue-ssh.target                              static          enabled      
runlevel0.target                               disabled        enabled      
runlevel1.target                               static          enabled      
runlevel2.target                               static          enabled      
runlevel3.target                               static          enabled      
runlevel4.target                               static          enabled      
runlevel5.target                               static          enabled      
runlevel6.target                               disabled        enabled      
shutdown.target                                static          enabled      
sigpwr.target                                  static          enabled      
sleep.target                                   static          enabled      
slices.target                                  static          enabled      
smartcard.target                               static          enabled      
sockets.target                                 static          enabled      
sound.target                                   static          enabled      
suspend-then-hibernate.target                  static          enabled      
suspend.target                                 static          enabled      
swap.target                                    static          enabled      
sysinit.target                                 static          enabled      
system-update-pre.target                       static          enabled      
system-update.target                           static          enabled      
timers.target                                  static          enabled      
umount.target                                  static          enabled      
anacron.timer                                  enabled         enabled      
apt-daily-upgrade.timer                        enabled         enabled      
apt-daily.timer                                enabled         enabled      
e2scrub_all.timer                              enabled         enabled      
fstrim.timer                                   enabled         enabled      
fwupd-refresh.timer                            enabled         enabled      
logrotate.timer                                enabled         enabled      
man-db.timer                                   enabled         enabled      
mdadm-last-resort@.timer                       static          enabled      
mdcheck_continue.timer                         enabled         enabled      
mdcheck_start.timer                            enabled         enabled      
mdmonitor-oneshot.timer                        enabled         enabled      
motd-news.timer                                enabled         enabled      
snapd.snap-repair.timer                        enabled         enabled      
systemd-tmpfiles-clean.timer                   static          enabled      
xfs_scrub_all.timer                            disabled        enabled      
root@tryhackme:/home/ubuntu# systemctl stop a-unkillable.service
root@tryhackme:/home/ubuntu# systemctl status a-unkillable.service
● a-unkillable.service - Unkillable exe
     Loaded: loaded (/etc/systemd/system/a-unkillable.service; enabled; vendo>
     Active: inactive (dead) since Sun 2023-12-24 09:14:53 UTC; 16s ago
    Process: 583 ExecStart=/usr/bin/sudo /etc/systemd/system/a service (code=>
   Main PID: 583 (code=killed, signal=TERM)

Dec 24 09:03:46 tryhackme systemd[1]: Started Unkillable exe.
Dec 24 09:03:47 tryhackme sudo[583]:     root : TTY=unknown ; PWD=/ ; USER=ro>
Dec 24 09:03:47 tryhackme sudo[583]: pam_unix(sudo:session): session opened f>
Dec 24 09:03:47 tryhackme sudo[667]: Merry Christmas
Dec 24 09:08:55 tryhackme sudo[2018]: Merry Christmas
Dec 24 09:14:53 tryhackme systemd[1]: Stopping Unkillable exe...
Dec 24 09:14:53 tryhackme sudo[583]: pam_unix(sudo:session): session closed f>
Dec 24 09:14:53 tryhackme systemd[1]: a-unkillable.service: Succeeded.
Dec 24 09:14:53 tryhackme systemd[1]: Stopped Unkillable exe.
lines 1-15/15 (END)...skipping...
● a-unkillable.service - Unkillable exe
     Loaded: loaded (/etc/systemd/system/a-unkillable.service; enabled; vendo>
     Active: inactive (dead) since Sun 2023-12-24 09:14:53 UTC; 16s ago
    Process: 583 ExecStart=/usr/bin/sudo /etc/systemd/system/a service (code=>
   Main PID: 583 (code=killed, signal=TERM)

Dec 24 09:03:46 tryhackme systemd[1]: Started Unkillable exe.
Dec 24 09:03:47 tryhackme sudo[583]:     root : TTY=unknown ; PWD=/ ; USER=ro>
Dec 24 09:03:47 tryhackme sudo[583]: pam_unix(sudo:session): session opened f>
Dec 24 09:03:47 tryhackme sudo[667]: Merry Christmas
Dec 24 09:08:55 tryhackme sudo[2018]: Merry Christmas
Dec 24 09:14:53 tryhackme systemd[1]: Stopping Unkillable exe...
Dec 24 09:14:53 tryhackme sudo[583]: pam_unix(sudo:session): session closed f>
Dec 24 09:14:53 tryhackme systemd[1]: a-unkillable.service: Succeeded.
Dec 24 09:14:53 tryhackme systemd[1]: Stopped Unkillable exe.
~
~
~
~
~
~
~
~
root@tryhackme:/home/ubuntu# top

top - 09:15:45 up 12 min,  0 users,  load average: 0.52, 1.31, 0.95
Tasks: 191 total,   1 running, 187 sleeping,   3 stopped,   0 zombie
%Cpu(s):  0.5 us,  0.0 sy,  0.0 ni, 99.5 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 s
MiB Mem :   3933.8 total,   2302.7 free,    714.0 used,    917.1 buff/cache
MiB Swap:      0.0 total,      0.0 free,      0.0 used.   2953.2 avail Mem 

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ 
    925 ubuntu    20   0  343800 116756  57488 S   0.7   2.9   0:07.70 
   1798 root      20   0  123492  27664   7788 S   0.7   0.7   0:01.93 
      1 root      20   0  102552  12080   8604 S   0.0   0.3   0:14.40 
      2 root      20   0       0      0      0 S   0.0   0.0   0:00.00 
      3 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 
      4 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 
      6 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 
      8 root      20   0       0      0      0 I   0.0   0.0   0:00.04 
      9 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 
     10 root      20   0       0      0      0 S   0.0   0.0   0:00.09 
     11 root      20   0       0      0      0 I   0.0   0.0   0:00.32 
     12 root      rt   0       0      0      0 S   0.0   0.0   0:00.00 
     13 root      20   0       0      0      0 S   0.0   0.0   0:00.00 
     14 root      20   0       0      0      0 S   0.0   0.0   0:00.00 
     15 root      rt   0       0      0      0 S   0.0   0.0   0:00.25 
     16 root      20   0       0      0      0 S   0.0   0.0   0:00.18 
     18 root       0 -20       0      0      0 I   0.0   0.0   0:00.00 
root@tryhackme:/home/ubuntu# systemctl disable a-unkillable.service
Removed /etc/systemd/system/multi-user.target.wants/a-unkillable.service.
root@tryhackme:/home/ubuntu# rm -rf /etc/systemd/system/a
root@tryhackme:/home/ubuntu# rm -rf /etc/systemd/system/a-unkillable.service
root@tryhackme:/home/ubuntu# systemctl status a-unkillable.service
Unit a-unkillable.service could not be found.
root@tryhackme:/home/ubuntu# systemctl daemon-reload
root@tryhackme:/home/ubuntu# 
